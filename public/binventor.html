<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Binventor</title>
  <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
  
  <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="./index.css">
  
  <style>
    *{
      outline:none
    }
  </style>
</head>
<body class="bg-gray-700">
  <div id="titlebar">
    <div id="drag-region">
      <div id="window-title">
        <span id="appTitle">BINVENTOR</span>
      </div>
      <div id="window-controls">
        <div class="button rounded-lg" id="min-button">
          <span>&#xE921;</span>
        </div>
        <div class="button rounded-lg" id="max-button">
          <span>&#xE922;</span>
        </div>
        <div class="button rounded-lg" id="restore-button">
          <span>&#xE923;</span>
        </div>
        <div class="button rounded-lg" id="close-button">
          <span>&#xE8BB;</span>
        </div>
      </div>
    </div>
  </div>
  <script>
    document.onreadystatechange = () => {
      require('electron')
      if (document.readyState == 'complete') {
        win = require('electron').remote.getCurrentWindow()
        handleWindowControls()
      }
    }

    let win
    function handleWindowControls() {
      document.getElementById('min-button').addEventListener('click', () => {
        win.minimize()
        toggleMaxRestoreButtons()
        console.log("hello")
      })
      document.getElementById('max-button').addEventListener('click', () => {
        win.maximize()
        toggleMaxRestoreButtons()
      })
      document.getElementById('restore-button').addEventListener('click', () => {
        win.unmaximize()
        toggleMaxRestoreButtons()
      })
      document.getElementById('close-button').addEventListener('click', () => {
        win.close()
        toggleMaxRestoreButtons()
      })

      toggleMaxRestoreButtons()
      win.on('maximize', toggleMaxRestoreButtons)
      win.on('unmaximize', toggleMaxRestoreButtons)

      function toggleMaxRestoreButtons() {
        if (win.isMaximized() || win.isKiosk()) {
          document.body.classList.add('maximized')
        } else {
          document.body.classList.remove('maximized')
        }
      }
    }
  </script>
  <div id="root" class="flex flex-col overflow-hidden">
    <div class="flex px-1">
      <button class="px-3 py-1 btn-reg-black" onclick="window.location.href = 'hacksaw.html'">HackSaw</button>
      <button class="px-3 py-1 btn-reg-black" onclick="FetchThemes()">Update Themes</button>
      <button class="px-3 py-1 btn-reg-black ml-auto" id="version" onclick="OpenGitHub()">GitHub</button>
    </div>
    <div class="flex flex-grow">
      <div id="editor" class="flex-1 mx-2 my-2 bg-gray-1100 rounded-lg">
        hello my name is Binventor
      </div>
      <div id="Samples" class="flex-1 mx-2 my-2 bg-gray-1100 rounded-lg">this is a sample</div>
      <canvas id="render-canvas" class="flex-1 rounded-lg m-2" style="width: 33%;height: auto;box-shadow: inset 0 0 5px black;"></canvas>
      <script>
        require('../src/binventor.js')
      </script>
    </div>
  </div>
  <script src="../src/utilities.js" defer></script>
</body>
</html>